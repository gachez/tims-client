{"ast":null,"code":"var _jsxFileName = \"/home/gachez/EnterpriseSystems/tims-client/src/index/App/Dashboard/AnalyticsProjects.js\";\nimport React from 'react';\nimport '../shared/TaskView.css';\nimport done from './TaskView/done.png';\nimport { Nav, Modal, Button, Form, Spinner, ListGroup, Popover } from 'react-bootstrap';\nimport add from './TaskView/add.png';\nimport trash from './shared/trash.png';\nimport axios from 'axios';\nimport TaskUsers from './TaskView/TaskUsers';\nimport open from '../shared/open-menu.png';\nimport ProjectsList from './ProjectsList';\nexport default class AnalyticsProjects extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modalDisplay: 'none',\n      isLoaded: false,\n      deleteModalDisplay: 'none',\n      tasksList: 'none',\n      tasks: [],\n      Users: [],\n      projects: [],\n      assignee: [],\n      addBtnClicked: false,\n      assigneeID: '',\n      assigneeChosen: '',\n      assigneeName: 'User',\n      getUsersRequest: axios.get(\"/api/v1/admin/get_users\", {\n        headers: {\n          'auth-token': `${localStorage.getItem('auth-token')}`\n        }\n      }),\n      getProjects: axios.get(\"/api/v1/admin/get_projects\", {\n        headers: {\n          'auth-token': `${localStorage.getItem('auth-token')}`\n        }\n      })\n    };\n\n    this.toggleDeleteModal = () => {\n      this.state.deleteModalDisplay === 'none' ? this.setState({\n        deleteModalDisplay: 'block'\n      }) : this.setState({\n        deleteModalDisplay: 'none'\n      });\n    };\n\n    this.toggleModalDisplay = () => {\n      this.state.modalDisplay === 'none' ? this.setState({\n        modalDisplay: 'block'\n      }) : this.setState({\n        modalDisplay: 'none'\n      });\n    };\n\n    this.toggleListsDisplay = () => {\n      this.state.tasksList === 'none' ? this.setState({\n        tasksList: 'block'\n      }) : this.setState({\n        tasksList: 'none'\n      });\n    };\n\n    this.deleteTask = id => {\n      axios.delete(\"/api/v1/admin/delete_task/\" + id, {\n        headers: {\n          'auth-token': `${localStorage.getItem('auth-token')}`\n        }\n      }).then(res => {\n        alert(res);\n        this.toggleDeleteModal();\n      }).catch(err => console.log(err));\n    };\n\n    this.getProjectID = id => {\n      this.setState({\n        assigneeChosen: id\n      });\n      return id;\n    };\n  }\n\n  componentDidMount() {\n    this.state.getUsersRequest.then(res => {\n      this.setState({\n        isLoaded: true,\n        Users: res.data\n      });\n    });\n    this.state.getProjects.then(res => {\n      this.setState({\n        projects: res.data\n      });\n    });\n    localStorage.setItem('id', '');\n  }\n\n  render() {\n    if (this.state.isLoaded) {\n      const UserTasks = this.state.tasks.filter(task => {\n        return task.userAssigned.toLowerCase() === this.state.assigneeChosen.toLowerCase();\n      });\n      const popover = /*#__PURE__*/React.createElement(Popover, {\n        id: \"popover-basic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Popover.Title, {\n        as: \"h3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      }, \"Popover right\"), /*#__PURE__*/React.createElement(Popover.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }\n      }, \"And here's some \", /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 33\n        }\n      }, \"amazing\"), \" content. It's very engaging. right?\"));\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-bg\",\n        style: {\n          display: this.state.modalDisplay\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Dialog, {\n        className: \"modal-add-user\",\n        style: {\n          display: this.state.modalDisplay\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 33\n        }\n      }, \"Add Project\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"formEventName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 37\n        }\n      }, \"Project Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n        name: \"projectname\",\n        type: \"textbox\",\n        placeholder: \"Enter name of project\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"formUsername\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 37\n        }\n      }, \"Description\"), /*#__PURE__*/React.createElement(Form.Control, {\n        name: \"taskdetails\",\n        as: \"textarea\",\n        rows: \"4\",\n        placeholder: \"write details of the project\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 37\n        }\n      })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.toggleModalDisplay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 33\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        onClick: () => {\n          this.setState({\n            addBtnClicked: true\n          });\n          console.log('assigning....');\n          const newProject = {\n            projectName: document.getElementsByName(\"projectname\")[0].value,\n            description: document.getElementsByName(\"taskdetails\")[0].value\n          };\n          axios.post(\"/api/v1/admin/add_project\", newProject, {\n            headers: {\n              'auth-token': `${localStorage.getItem('auth-token')}`\n            }\n          }).then(res => {\n            alert('Succesfully added new project');\n            this.setState({\n              addBtnClicked: false\n            });\n            this.toggleModalDisplay();\n          }).catch(console.error);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 33\n        }\n      }, this.state.addBtnClicked ? 'Adding..' : 'Add')))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-bg\",\n        style: {\n          display: this.state.deleteModalDisplay\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Dialog, {\n        className: \"modal-add-user\",\n        style: {\n          display: this.state.deleteModalDisplay\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 33\n        }\n      }, \"Delete Task?\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 33\n        }\n      }, \"Are you sure you want to delete this task?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.toggleDeleteModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 33\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        onClick: () => {\n          this.deleteTask(this.state.assigneeID);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 33\n        }\n      }, \"Delete\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        id: \"page-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 22\n        }\n      }, \"Analytics(Projects)\"), /*#__PURE__*/React.createElement(Nav, {\n        variant: \"pills\",\n        defaultActiveKey: \"#\",\n        className: \"navigation-tab-menu\",\n        style: {\n          position: 'absolute',\n          left: ' 50px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(Nav.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Nav.Link, {\n        href: \"#\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }, \"Projects List\")), /*#__PURE__*/React.createElement(Nav.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Nav.Link, {\n        onClick: this.toggleModalDisplay,\n        eventKey: \"link-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 29\n        }\n      }, \"Add Project\", /*#__PURE__*/React.createElement(\"img\", {\n        src: add,\n        alt: \"add\",\n        style: {\n          width: '16px',\n          height: '16px',\n          marginLeft: '5px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 102\n        }\n      })))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"section\", {\n        className: \"section-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        defaultActiveKey: \"#link1\",\n        style: {\n          width: '60%',\n          height: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ProjectsList, {\n        getID: this.getProjectID,\n        projectsL: this.state.projects,\n        toggleMod: this.toggleListsDisplay,\n        openAnalytics: this.props.loadPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 18\n        }\n      })))));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-bg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Spinner, {\n      id: \"spinner\",\n      animation: \"grow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/gachez/EnterpriseSystems/tims-client/src/index/App/Dashboard/AnalyticsProjects.js"],"names":["React","done","Nav","Modal","Button","Form","Spinner","ListGroup","Popover","add","trash","axios","TaskUsers","open","ProjectsList","AnalyticsProjects","Component","state","modalDisplay","isLoaded","deleteModalDisplay","tasksList","tasks","Users","projects","assignee","addBtnClicked","assigneeID","assigneeChosen","assigneeName","getUsersRequest","get","headers","localStorage","getItem","getProjects","toggleDeleteModal","setState","toggleModalDisplay","toggleListsDisplay","deleteTask","id","delete","then","res","alert","catch","err","console","log","getProjectID","componentDidMount","data","setItem","render","UserTasks","filter","task","userAssigned","toLowerCase","popover","display","newProject","projectName","document","getElementsByName","value","description","post","error","position","left","width","height","marginLeft","props","loadPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../shared/TaskView.css';\nimport done from './TaskView/done.png';\nimport {Nav,\n         Modal,\n         Button, \n         Form, \n         Spinner , \n         ListGroup, \n         Popover} from 'react-bootstrap';\nimport add from './TaskView/add.png';\nimport trash from './shared/trash.png';\nimport axios from 'axios';\nimport TaskUsers from './TaskView/TaskUsers';\nimport open from '../shared/open-menu.png';\nimport ProjectsList from './ProjectsList';\n\n\nexport default class AnalyticsProjects extends React.Component{\n    state = {\n        modalDisplay: 'none',\n        isLoaded: false,\n        deleteModalDisplay: 'none',\n        tasksList: 'none',\n        tasks: [],\n        Users: [],\n        projects: [],\n        assignee: [],\n        addBtnClicked: false,\n        assigneeID: '',\n        assigneeChosen: '',\n        assigneeName: 'User',\n        getUsersRequest: axios.get(\"/api/v1/admin/get_users\",  {\n            headers: {\n              'auth-token': `${localStorage.getItem('auth-token')}`\n            }\n          }),\n        getProjects: axios.get(\"/api/v1/admin/get_projects\",  {\n            headers: {\n              'auth-token': `${localStorage.getItem('auth-token')}`\n            }\n          })  \n        }\n\n    componentDidMount() {\n        this.state.getUsersRequest.then(res => {\n\n            this.setState({\n                isLoaded: true,\n                Users: res.data\n            })\n        });\n\n        this.state.getProjects.then(res => {\n            this.setState({\n                projects: res.data\n            })\n        });\n       \n        localStorage.setItem('id', '');\n    }\n\n    \n\n\n    toggleDeleteModal = () => {\n        this.state.deleteModalDisplay === 'none' ? this.setState({deleteModalDisplay: 'block'}) : this.setState({deleteModalDisplay: 'none'})\n    }\n\n    toggleModalDisplay = () => {\n        this.state.modalDisplay === 'none' ? this.setState({modalDisplay: 'block'}) : this.setState({modalDisplay: 'none'})\n        \n    }\n\n    toggleListsDisplay = () => {\n        this.state.tasksList === 'none' ? this.setState({tasksList: 'block'}) : this.setState({ tasksList: 'none'})\n        \n    }\n\n    deleteTask = (id) => {\n        axios.delete(\"/api/v1/admin/delete_task/\" + id,{\n            headers: {\n              'auth-token': `${localStorage.getItem('auth-token')}`\n            }\n          }).then(res => {\n             alert(res);\n             this.toggleDeleteModal()\n\n          }).catch(err => console.log(err))\n    }\n\n    getProjectID = (id) =>{\n        this.setState({\n           assigneeChosen: id\n        })\n        return id\n    }\n\n\n    \n\n    render(){\n        if(this.state.isLoaded){\n         const UserTasks = this.state.tasks.filter(task => {\n            return task.userAssigned.toLowerCase() === this.state.assigneeChosen.toLowerCase()\n          }); \n         const popover = (\n            <Popover id=\"popover-basic\">\n              <Popover.Title as=\"h3\">Popover right</Popover.Title>\n              <Popover.Content>\n                And here's some <strong>amazing</strong> content. It's very engaging.\n                right?\n              </Popover.Content>\n            </Popover>\n          );\n            return(\n                <>\n\n                {/* add projects modal */}\n                 <div className=\"modal-bg\" style={{\n                            display: this.state.modalDisplay\n                        }}>\n                        <Modal.Dialog className=\"modal-add-user\" style={{\n                            display: this.state.modalDisplay\n                        }}>\n                            <Modal.Header >\n                                <Modal.Title>Add Project</Modal.Title>\n                            </Modal.Header>\n        \n                            <Modal.Body>\n                            <Form>\n                               <Form.Group controlId=\"formEventName\">\n                                    <Form.Label>Project Name</Form.Label>\n                                    <Form.Control name=\"projectname\" type=\"textbox\" placeholder=\"Enter name of project\" />\n                                </Form.Group>\n                            \n                                <Form.Group controlId=\"formUsername\">\n                                    <Form.Label>Description</Form.Label>\n                                    <Form.Control name=\"taskdetails\" as=\"textarea\" rows=\"4\" placeholder=\"write details of the project\" />\n                                </Form.Group>\n        \n                                </Form>\n                            </Modal.Body>\n                        <Modal.Footer>\n                                <Button variant=\"secondary\" onClick={this.toggleModalDisplay}>Close</Button>\n                                <Button variant=\"primary\" onClick={() => {\n                                    this.setState({addBtnClicked: true})\n                                    console.log('assigning....');\n                                    const newProject = {\n                                        projectName: document.getElementsByName(\"projectname\")[0].value,\n                                        description:   document.getElementsByName(\"taskdetails\")[0].value\n                                    }\n\n                                    axios.post(\"/api/v1/admin/add_project\", newProject, {\n                                        headers: {\n                                        'auth-token': `${localStorage.getItem('auth-token')}`\n                                        }\n                                    })\n                                    .then( res => {\n                                        alert('Succesfully added new project');\n                                        this.setState({addBtnClicked: false});\n                                        this.toggleModalDisplay();\n                                    })\n                                    .catch(console.error)\n                                  \n                                }}>{this.state.addBtnClicked ? 'Adding..' : 'Add'}</Button>\n                            </Modal.Footer>\n                            </Modal.Dialog>\n                        </div>\n    \n                        <div className=\"modal-bg\" style={{\n                            display: this.state.deleteModalDisplay\n                                }}>\n                             \n                            <Modal.Dialog  className=\"modal-add-user\" style={{\n                            display: this.state.deleteModalDisplay\n                                }}>\n                            <Modal.Header >\n                                <Modal.Title>Delete Task?</Modal.Title>\n                            </Modal.Header>\n        \n                            <Modal.Body>\n                                <p>Are you sure you want to delete this task?</p>\n                            </Modal.Body>\n        \n                            <Modal.Footer>\n                                <Button variant=\"secondary\" onClick={this.toggleDeleteModal}>Cancel</Button>\n                                <Button variant=\"primary\" onClick={() => {\n                                    this.deleteTask(this.state.assigneeID)\n                                    }}>Delete</Button>\n                            </Modal.Footer>\n                            </Modal.Dialog>\n                      \n                             </div>  \n    \n                 <div className=\"container\">\n                     <h2 id=\"page-title\">Analytics(Projects)</h2>\n                     <Nav variant=\"pills\" defaultActiveKey=\"#\" className=\"navigation-tab-menu\" style={{position: 'absolute', left:' 50px'}}>\n                        <Nav.Item>\n                            <Nav.Link href=\"#\">Projects List</Nav.Link>\n                        </Nav.Item>\n                        <Nav.Item>\n                            <Nav.Link onClick={this.toggleModalDisplay} eventKey=\"link-1\">Add Project<img src={add} alt=\"add\" style={{width: '16px', height: '16px', marginLeft: '5px'}}/></Nav.Link>\n                        </Nav.Item>\n                        </Nav>\n                        <br />\n                <section className=\"section-container\">\n                <ListGroup  defaultActiveKey=\"#link1\" style={{\n                    width: '60%', \n                    height: '100%'\n                }}>\n                 <ProjectsList getID={this.getProjectID} projectsL={this.state.projects} toggleMod={this.toggleListsDisplay} openAnalytics={this.props.loadPage}/>    \n                 </ListGroup>\n                </section>\n    \n            \n                      \n                    \n                 </div>\n                </>\n            )\n        }\n        return (\n            <div className=\"spinner-bg\">\n                <Spinner id=\"spinner\" animation=\"grow\" />\n            </div>\n            );\n    }\n}"]},"metadata":{},"sourceType":"module"}